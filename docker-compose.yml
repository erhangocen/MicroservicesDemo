version: "3.1"

services:
    s_api_gateway:
        container_name: c_api_gateway
        image: erhangocen/api_gateway
        build:
            context: .
            dockerfile: src/APIGateway/Dockerfile
        ports:
            - "80:80"
        networks:
            - micro_net
            - int_net

    s_category:
        container_name: c_category
        image: erhangocen/category
        build:
            context: .
            dockerfile: src/category/Dockerfile
        ports:
            - "9000:9000"
        networks:
            - int_net
    s_product:
        container_name: c_product
        image: erhangocen/product
        build:
            context: .
            dockerfile: src/product/Dockerfile
        ports:
            - "9001:9001"
        networks:
            - int_net

networks:
  int_net:
    driver: overlay
    internal: true
  micro_net:
    driver: bridge